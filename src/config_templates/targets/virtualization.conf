# Virtualization testing configuration
# Optimized for virtme-ng, QEMU, and KVM testing

# Virtualization support
CONFIG_VIRTUALIZATION=y
CONFIG_KVM=y
CONFIG_KVM_INTEL=y
CONFIG_KVM_AMD=y

# VirtIO drivers (essential for QEMU)
CONFIG_VIRTIO=y
CONFIG_VIRTIO_PCI=y
CONFIG_VIRTIO_PCI_LEGACY=y
CONFIG_VIRTIO_BALLOON=y
CONFIG_VIRTIO_INPUT=y
CONFIG_VIRTIO_MMIO=y
CONFIG_VIRTIO_BLK=y
CONFIG_SCSI_VIRTIO=y
CONFIG_VIRTIO_NET=y
CONFIG_VIRTIO_CONSOLE=y
CONFIG_HW_RANDOM_VIRTIO=y
CONFIG_DRM_VIRTIO_GPU=y

# VirtIO filesystem (virtiofs) - critical for virtme-ng
CONFIG_VIRTIO_FS=y

# 9P filesystem (fallback for virtme-ng)
CONFIG_NET_9P=y
CONFIG_NET_9P_VIRTIO=y
CONFIG_9P_FS=y
CONFIG_9P_FS_POSIX_ACL=y

# FUSE (required by virtiofs)
CONFIG_FUSE_FS=y

# Fast user-space virtual networking
CONFIG_TUN=y
CONFIG_VETH=y

# VFIO for device passthrough
CONFIG_VFIO=y
CONFIG_VFIO_PCI=y
CONFIG_VFIO_MDEV=y

# Overlay filesystem (for virtme-ng CoW)
CONFIG_OVERLAY_FS=y

# Network namespaces
CONFIG_NET_NS=y
CONFIG_USER_NS=y

# Minimal necessary filesystems
CONFIG_EXT4_FS=y
CONFIG_TMPFS=y
CONFIG_PROC_FS=y
CONFIG_SYSFS=y

# Console
CONFIG_TTY=y
CONFIG_SERIAL_8250=y
CONFIG_SERIAL_8250_CONSOLE=y
CONFIG_VIRTIO_CONSOLE=y

# Block devices
CONFIG_BLK_DEV_LOOP=y

# PCI
CONFIG_PCI=y
CONFIG_PCI_HOST_GENERIC=y

# Networking
CONFIG_NET=y
CONFIG_INET=y
CONFIG_PACKET=y

# ACPI (for proper shutdown in VMs)
CONFIG_ACPI=y

# Module support
CONFIG_MODULES=y
CONFIG_MODULE_UNLOAD=y

# No unnecessary debugging (for performance)
# CONFIG_DEBUG_KERNEL is not set
# CONFIG_DEBUG_INFO is not set
